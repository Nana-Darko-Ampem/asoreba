"use strict";(self.webpackChunkasoreba_admin=self.webpackChunkasoreba_admin||[]).push([[409],{8409:(W,_,a)=>{a.r(_),a.d(_,{AsorebaManagementModule:()=>H});var p=a(7659),F=a(7526),i=a(95),q=a(916),e=a(5879),g=a(1507),u=a(882);let v=(()=>{class n extends u.c8{constructor(t){super("Asoreba",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.yV))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=a(6814);function M(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.regExps.nameError)}}function U(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.regExps.requiredFieldError)}}function y(n,r){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,M,2,1,"small",19),e.YNc(2,U,2,1,"small",19),e.qZA()),2&n){const t=e.oxw();let o,l;e.xp6(1),e.Q6J("ngIf",null==(o=t.getFormControl("first_name"))||null==o.errors?null:o.errors.pattern),e.xp6(1),e.Q6J("ngIf",(null==(l=t.getFormControl("first_name"))||null==l.errors?null:l.errors.required)&&(null==(l=t.getFormControl("first_name"))?null:l.touched))}}function w(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.regExps.nameError)}}function I(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.regExps.requiredFieldError)}}function S(n,r){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,w,2,1,"small",19),e.YNc(2,I,2,1,"small",19),e.qZA()),2&n){const t=e.oxw();let o,l;e.xp6(1),e.Q6J("ngIf",null==(o=t.getFormControl("last_name"))||null==o.errors?null:o.errors.pattern),e.xp6(1),e.Q6J("ngIf",(null==(l=t.getFormControl("last_name"))||null==l.errors?null:l.errors.required)&&(null==(l=t.getFormControl("last_name"))?null:l.touched))}}function L(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.regExps.nameError)}}function E(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.regExps.requiredFieldError)}}function N(n,r){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,L,2,1,"small",19),e.YNc(2,E,2,1,"small",19),e.qZA()),2&n){const t=e.oxw();let o,l;e.xp6(1),e.Q6J("ngIf",null==(o=t.getFormControl("other_name"))||null==o.errors?null:o.errors.pattern),e.xp6(1),e.Q6J("ngIf",(null==(l=t.getFormControl("other_name"))||null==l.errors?null:l.errors.required)&&(null==(l=t.getFormControl("other_name"))?null:l.touched))}}function Y(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.regExps.emailError," ")}}function k(n,r){if(1&n&&(e.TgZ(0,"small",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.regExps.requiredFieldError," ")}}function j(n,r){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,Y,2,1,"small",19),e.YNc(2,k,2,1,"small",19),e.qZA()),2&n){const t=e.oxw();let o,l;e.xp6(1),e.Q6J("ngIf",null==(o=t.getFormControl("email"))?null:o.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",(null==(l=t.getFormControl("email"))?null:l.hasError("required"))&&(null==(l=t.getFormControl("email"))?null:l.touched))}}let h=(()=>{class n{constructor(t,o,l,s){this.appLoaderService=t,this.asorebaService=o,this.formBuilder=l,this.router=s,this.regExps={}}ngOnInit(){this.appLoaderService.store.select(q.E).subscribe({next:t=>{this.regExps=t,this.createForm()}})}createForm(){this.addForm=this.formBuilder.group({first_name:["",[i.kI.required,i.kI.pattern(this.regExps.nameRegex)]],last_name:["",i.kI.pattern(this.regExps.nameRegex)],other_name:["",i.kI.pattern(this.regExps.nameRegex)],date_of_birth:["1994-12-30"],gender:["Male"],email:["",[i.kI.required,i.kI.pattern(this.regExps.emailRegex)]],service_uuid:["ef9cee6a-9db3-4a3a-bd7e-fd743a2f78b6"],is_local_council:[!1],position:[""],profession:[""],company:[""],area:[""],house_number:[""]})}getFormControl(t){return this.addForm.get(t)}onAddPost(){console.log("Form values",this.addForm.value),this.asorebaService.add(this.addForm.value).subscribe({next:t=>{this.router.navigate(["/asoreba"])},error:t=>{}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.P),e.Y36(v),e.Y36(i.qu),e.Y36(p.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-member"]],decls:36,vars:14,consts:[[1,"row","d-flex","justify-content-center","mt-4"],[1,"col-md-6","col-sm-10"],[1,"card","shadow"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for",""],["type","text","formControlName","first_name",1,"form-control"],["class","text-center",4,"ngIf"],["type","text","formControlName","last_name",1,"form-control"],["type","text","formControlName","other_name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],[1,"mb-3","d-flex","justify-content-start"],[1,"form-check-reverse"],[1,"form-check-label","pt-2","me-2"],["type","checkbox","value","","id","flexCheckDefault",1,"form-check-input","me-2"],[1,"ml-3","d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-center"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),e._uU(5,"Add Asoreba"),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"form",4),e.NdJ("ngSubmit",function(){return o.onAddPost()}),e.TgZ(8,"div",5)(9,"label",6),e._uU(10,"First Name"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,y,3,2,"div",8),e.qZA(),e.TgZ(13,"div",5)(14,"label",6),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",9),e.YNc(17,S,3,2,"div",8),e.qZA(),e.TgZ(18,"div",5)(19,"label",6),e._uU(20,"Other Name"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,N,3,2,"div",8),e.qZA(),e.TgZ(23,"div",5)(24,"label",6),e._uU(25,"Email"),e.qZA(),e._UZ(26,"input",11),e.YNc(27,j,3,2,"div",8),e.qZA(),e.TgZ(28,"div",12)(29,"div",13)(30,"label",14),e._uU(31," Is local council member? "),e.qZA(),e._UZ(32,"input",15),e.qZA()(),e.TgZ(33,"div",16)(34,"button",17),e._uU(35,"Add Asoreba"),e.qZA()()()()()()()),2&t){let l,s,c,d;e.xp6(7),e.Q6J("formGroup",o.addForm),e.xp6(4),e.ekj("is-invalid",o.getFormControl("first_name").invalid&&o.getFormControl("first_name").touched),e.xp6(1),e.Q6J("ngIf",(null==(l=o.getFormControl("first_name"))?null:l.invalid)&&((null==(l=o.getFormControl("first_name"))?null:l.dirty)||(null==(l=o.getFormControl("first_name"))?null:l.touched))),e.xp6(4),e.ekj("is-invalid",o.getFormControl("last_name").invalid&&o.getFormControl("last_name").touched),e.xp6(1),e.Q6J("ngIf",(null==(s=o.getFormControl("last_name"))?null:s.invalid)&&((null==(s=o.getFormControl("last_name"))?null:s.dirty)||(null==(s=o.getFormControl("last_name"))?null:s.touched))),e.xp6(4),e.ekj("is-invalid",o.getFormControl("other_name").invalid&&o.getFormControl("other_name").touched),e.xp6(1),e.Q6J("ngIf",(null==(c=o.getFormControl("other_name"))?null:c.invalid)&&((null==(c=o.getFormControl("other_name"))?null:c.dirty)||(null==(c=o.getFormControl("other_name"))?null:c.touched))),e.xp6(4),e.ekj("is-invalid",o.getFormControl("email").invalid&&o.getFormControl("email").touched),e.xp6(1),e.Q6J("ngIf",(null==(d=o.getFormControl("email"))?null:d.invalid)&&((null==(d=o.getFormControl("email"))?null:d.dirty)||(null==(d=o.getFormControl("email"))?null:d.touched))),e.xp6(7),e.Q6J("disabled",!o.addForm.valid)}},dependencies:[m.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u]}),n})();var J=a(9439),P=a(2096);let R=(()=>{class n{constructor(t){this.appLoaderService=t}addPushSubscriber(t){return(0,P.of)("")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(g.P))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Q=a(6709),b=a(4221);function V(n,r){1&n&&(e.TgZ(0,"span",14),e._UZ(1,"i",15),e.qZA())}function D(n,r){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",16),e.qZA())}function B(n,r){if(1&n&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"div",6)(7,"h5",7),e._uU(8),e.qZA(),e.TgZ(9,"div"),e._UZ(10,"i",8),e.TgZ(11,"span",9),e._uU(12),e.qZA()(),e.TgZ(13,"div"),e._UZ(14,"i",10),e.TgZ(15,"span",9),e._uU(16),e.qZA()(),e.TgZ(17,"div")(18,"span"),e._uU(19),e.qZA(),e.TgZ(20,"span",9),e._uU(21,"Status:"),e.TgZ(22,"span",11),e._uU(23),e.qZA()()(),e.TgZ(24,"div")(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"div"),e._uU(28," Local council member: "),e.YNc(29,V,2,0,"span",12),e.YNc(30,D,2,0,"span",13),e.qZA()()()()()()),2&n){const t=r.$implicit;e.xp6(8),e.lnq("",null==t?null:t.first_name," ",null==t?null:t.other_name," ",null==t?null:t.last_name," "),e.xp6(4),e.hij(" ",null==t?null:t.email," "),e.xp6(4),e.hij("",null==t?null:t.service," Service"),e.xp6(3),e.hij("Gender: ",null==t?null:t.gender,""),e.xp6(4),e.Oqu(null==t?null:t.status),e.xp6(3),e.hij("Born on: ",null==t?null:t.date_of_birth,""),e.xp6(3),e.Q6J("ngIf",null==t?null:t.local_council_member),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.local_council_member))}}let Z=(()=>{class n{constructor(t,o){this.securityService=t,this.asorebaStore=o}ngOnInit(){}loadRequirements(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.I),e.Y36(b.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mobile-view"]],decls:2,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"card","profile-card","mb-4"],[1,"card-body"],[1,"row","d-flex","align-items-center"],[1,"col-4","col-sm-4","col-md-4"],["src","https://img.a.transfermarkt.technology/portrait/big/8198-1631656078.jpg?lm=1","alt","profile_pic",1,"profile_pic"],[1,"col-8","col-sm-8","col-md-8","content-div"],[1,""],[1,"fa-solid","fa-envelope"],[1,"ms-2"],[1,"fa-solid","fa-church"],[1,"badge","bg-info","text-white","ms-2"],["class","text-red",4,"ngIf"],[4,"ngIf"],[1,"text-red"],[1,"fa-solid","fa-check"],[1,"fa-solid","fa-xmark"]],template:function(t,o){1&t&&(e.YNc(0,B,31,10,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngForOf",e.lcZ(1,1,o.asoremma$))},dependencies:[m.sg,m.O5,m.Ov]}),n})();function G(n,r){if(1&n&&(e.TgZ(0,"tr")(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",2),e._uU(4),e.qZA(),e.TgZ(5,"td",2),e._uU(6),e.qZA(),e.TgZ(7,"td",2)(8,"span",5),e._uU(9),e.qZA()(),e.TgZ(10,"td",2),e._uU(11),e.ALo(12,"date"),e.qZA()()),2&n){const t=r.$implicit;e.xp6(2),e.lnq(" ",null==t?null:t.first_name," ",null==t?null:t.other_name," ",null==t?null:t.last_name," "),e.xp6(2),e.hij(" ",null==t?null:t.gender," "),e.xp6(2),e.hij(" ",null==t?null:t.email," "),e.xp6(3),e.Oqu(null==t?null:t.status),e.xp6(2),e.hij(" ",e.xi3(12,7,null==t?null:t.date_created,"mediumDate")," ")}}let x=(()=>{class n{constructor(t,o){this.asorebaService=t,this.asorebaStore=o}ngOnInit(){this.loadRequirements()}loadRequirements(){this.asoreba$=this.asorebaService.getAll()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v),e.Y36(b.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-large-screens-view"]],decls:16,vars:3,consts:[[1,"table","table-hover"],[1,"thead-dark"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,""],[1,"badge","rounded-pill","text-bg-primary","toUpperCase"]],template:function(t,o){1&t&&(e.TgZ(0,"table",0)(1,"thead",1)(2,"tr")(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",2),e._uU(6,"Gender"),e.qZA(),e.TgZ(7,"th",2),e._uU(8,"Email"),e.qZA(),e.TgZ(9,"th",2),e._uU(10,"Status"),e.qZA(),e.TgZ(11,"th",2),e._uU(12,"Date Created"),e.qZA()()(),e.TgZ(13,"tbody"),e.YNc(14,G,13,10,"tr",3),e.ALo(15,"async"),e.qZA()()),2&t&&(e.xp6(14),e.Q6J("ngForOf",e.lcZ(15,1,o.asoreba$)))},dependencies:[m.sg,m.Ov,m.uU]}),n})();const K=function(){return["/asoreba/add"]};const $=[{path:"",component:(()=>{class n{constructor(t,o){this.swPush=t,this.notificationsService=o,this.VAPID_PUBLIC_KEY="BI1-Lx6Ae5MEukZ4HjP3UxttCPw9eOOTVyiuvoo3KhQsmafka1wpp4GER5vf9wia-MU9NwFCi0ujqzCwqwuYqY0"}ngOnInit(){}subscribeToNotifications(){this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(t=>{console.log("Notification subscription: ",t),this.notificationsService.addPushSubscriber(t).subscribe({next:o=>{},error:o=>{}})}).catch(t=>{console.log("ould not subscribe to notifications",t)})}sendNewsLetter(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(J.Mk),e.Y36(R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:18,vars:2,consts:[[1,"row","d-flex","justify-content-center","mt-4"],[1,"col-md-8","col-sm-10","d-flex","justify-content-end"],[1,"btn","btn-primary","mr-2",3,"click"],["fill","none","stroke","currentColor","stroke-width","1.5","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg","aria-hidden","true",1,"hero-icon"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"btn","btn-primary",3,"routerLink"],[1,"col-md-8","col-sm-10"],[1,"card","fade-up","mt-4"],[1,"card-body"],[1,"row"],[1,"d-block","d-md-none","col-md-6","col-lg-6"],[1,"d-none","d-md-block","table-responsive"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return o.subscribeToNotifications()}),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4),e.qZA(),e._uU(5," Notifications "),e.qZA(),e.kcU(),e.TgZ(6,"button",5),e.O4$(),e.TgZ(7,"svg",3),e._UZ(8,"path",4),e.qZA(),e._uU(9," Add Asoreba "),e.qZA()(),e.kcU(),e.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10),e._UZ(15,"app-mobile-view"),e.qZA()(),e.TgZ(16,"div",11),e._UZ(17,"app-large-screens-view"),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("routerLink",e.DdM(1,K)))},dependencies:[p.rH,Z,x],styles:[".hero-icon[_ngcontent-%COMP%]{width:20px;padding-bottom:7px;display:inline-block}"]}),n})()},{path:"add",component:h},{path:"details",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-details"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"member-details works!"),e.qZA())}}),n})()}];var f=a(7398),X=a(9862);let T=(()=>{class n extends u.EJ{constructor(t,o,l){super("Post",t,o),this.httpClient=t,this.appLoaderService=l}getAll(){return this.appLoaderService.httpCall.get(this.appLoaderService.endpoints.fqdn+this.appLoaderService.endpoints.asoremma).pipe((0,f.U)(t=>t.data))}add(t){return this.httpClient.post(this.appLoaderService.endpoints.fqdn+this.appLoaderService.endpoints.asoreba,t).pipe((0,f.U)(o=>({...t,id:o.name})))}update(t){return this.http.put(this.appLoaderService.endpoints.fqdn,{...t.changes})}delete(t){return this.http.delete(this.appLoaderService.endpoints.fqdn).pipe((0,f.U)(o=>t))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(X.eN),e.LFG(u.hR),e.LFG(g.P))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const z={Asoreba:{selectId:n=>n.profile_uuid}};let H=(()=>{class n{constructor(t,o,l){t.registerMetadataMap(z),o.registerService("Asoreba",l)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.f0),e.LFG(u.sP),e.LFG(T))},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[T],imports:[F.m,i.UX,p.Bz.forChild($)]}),n})()}}]);